<mujoco model="bd1 scene">
	<option timestep="0.002" />
	<option gravity="0 0 -9.81" />

	<compiler angle="radian" autolimits="true" />

	<include file="so100.xml" />
	
	<asset>
		<texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="3072" />
		<texture type="2d" name="groundplane" builtin="checker" mark="edge" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3"
      markrgb="0.8 0.8 0.8" width="300" height="300" />
		<material name="groundplane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.2" />
	</asset>

	<visual>
		<headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0" />
		<rgba haze="0.15 0.25 0.35 1" />
		<global azimuth="150" elevation="-20" offheight="640" />
	</visual>

	<worldbody>
		<light pos="0 0 3" dir="0 0 -1" directional="false" />
		<body name="floor">
			<geom pos="0 0 0" name="floor" size="0 0 .125" type="plane" material="groundplane" solref="0.0 0.0" />
		</body>

		<body name="cube" pos="0.06 0.135 0.017">
			<freejoint name="cube" />
			<inertial pos="0 0 0" mass=".05" diaginertia="0.00001125 0.00001125 0.00001125" />
			<geom friction="1.5 1.5 1.5" condim="4" pos="0 0 0" size="0.015 0.015 0.015" type="box" name="cube" rgba="0.5 0 0 1" priority="1" />
		</body>

		<camera name="camera_front" pos="0.049 0.5 0.225" xyaxes="-0.998 0.056 -0.000 -0.019 -0.335 0.942" />
		<camera name="camera_top" pos="0 0.1 0.6" euler="0 0 0" mode="fixed" />
		<camera name="camera_vizu" pos="-0.1 0.6 0.3" quat="-0.15 -0.1 0.6 1" />

		<!-- Goal Region 1 -->
		<geom name="goal_region_1" type="box" pos=".06 .135 0.01" size="0.035 0.045 0.007" rgba="1 1 0 0.3" contype="0" conaffinity="0" />

		<!-- Goal Region 2 -->
		<geom name="goal_region_2" type="box" pos="-.06 .135 0.01" size="0.035 0.045 0.007" rgba="1 0 1 0.3" contype="0" conaffinity="0" />

		<!-- Define the rails that contain the cube -->
		<geom name="left_wall" type="box" pos="-0.125 0.135 0.005" size="0.01 0.055 0.007" rgba="1 1 1 1" />
		<geom name="right_wall" type="box" pos="0.125 0.135 0.005" size="0.01 0.055 0.007" rgba="1 1 1 1" />
		<geom name="top_wall" type="box" pos="0 0.09 0.005" size="0.125 0.01 0.007" rgba="1 1 1 1" />
		<geom name="bottom_wall" type="box" pos="0 0.18 0.005" size="0.125 0.01 0.007" rgba="1 1 1 1" />

	</worldbody>

<!-- 
so100.xml 中的关节：
so100.xml 文件中定义了 6 个关节，分别是 Rotation, Pitch, Elbow, Wrist_Pitch, Wrist_Roll, 和 Jaw。

push_cube_loop.xml 中的额外关节：
push_cube_loop.xml 文件中通过 <include file="so100.xml" /> 引入了 so100.xml 的内容。
此外，push_cube_loop.xml 文件中还定义了一个自由关节 <freejoint name="cube" />，用于控制立方体的位置和姿态。这个自由关节有 7 个自由度（3 个平移自由度和 4 个旋转自由度）。

总自由度：
so100.xml 的 6 个关节 + push_cube_loop.xml 中立方体的 7 个自由度 = 总共 13 个自由度。

解决方案
你需要在 <keyframe> 标签中提供 13 个 qpos 值，其中前 6 个值对应 so100.xml 中的关节，后 7 个值对应立方体的自由关节。
1. 确定立方体的初始位置和姿态
假设你希望立方体在初始位置 (0.06, 0.135, 0.017)，并且没有旋转（四元数为 [1, 0, 0, 0]），
你可以设置立方体的初始 qpos 为 [0.06, 0.135, 0.017, 1, 0, 0, 0]。

qpos="0 -3.14 3.14 0.817 0 -0.157 0.06 0.135 0.017 1 0 0 0"：
前 6 个值 0 -3.14 3.14 0.817 0 -0.157 对应 so100.xml 中的 6 个关节。
后 7 个值 0.06 0.135 0.017 1 0 0 0 对应立方体的 7 个自由度（位置 (0.06, 0.135, 0.017) 和四元数 [1, 0, 0, 0] 表示没有旋转）。
通过这种方式，你可以确保 qpos 的长度正确，并且机器人和立方体都能被正确初始化。 -->

    <keyframe>
        <key name="home" qpos="0 -3.14 3.14 0.817 0 -0.157 0.06 0.135 0.017 1 0 0 0" ctrl="0 -3.14 3.14 0.817 0 -0.157"/>
    </keyframe>


</mujoco>
